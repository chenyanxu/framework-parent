<blueprint xmlns:jpa="http://aries.apache.org/xmlns/jpa/v2.0.0"
           xmlns:tx="http://aries.apache.org/xmlns/transactions/v1.2.0"
           default-activation="eager"
           xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
    <jpa:enable/>
    <tx:enable-annotations/>

    <!--<bean id="reviewServlet" class="com.kalix.framework.core.impl.biz.ReviewServlet">-->
    <!--</bean>-->
    <!--<service interface="javax.servlet.Servlet" ref="reviewServlet">-->
        <!--<service-properties>-->
            <!--<entry key="alias" value="/camel/rest/servlet/review" />-->
            <!--<entry key="matchOnUriPrefix" value="true" />-->
            <!--<entry key="servlet-name" value="ReviewServlet"/>-->
        <!--</service-properties>-->
    <!--</service>-->

    <reference id="httpService" interface="org.osgi.service.http.HttpService"/>

    <bean id="reviewServlet" class="com.kalix.framework.core.impl.biz.ReviewServlet">
    </bean>
    <bean class="org.apache.camel.component.servlet.osgi.OsgiServletRegisterer"
          init-method="register"
          destroy-method="unregister">
        <property name="alias" value="/camel/sevlet"/>
        <property name="httpService" ref="httpService"/>
        <property name="servlet" ref="reviewServlet"/>
    </bean>

    <!--<bean id="filteredServlet" class="org.ops4j.pax.web.extender.samples.whiteboard.internal.WhiteboardServlet">-->
    <!--<argument type="java.lang.String" value="/filtered"/>-->
    <!--</bean>-->
    <!--<service id="camelServletService" ref="camelServlet"  interface="javax.servlet.Servlet">-->
    <!--<service-properties>-->
    <!--<entry key="alias" value="/camel/rest"/>-->
    <!--&lt;!&ndash;<entry key="httpContext.id" value="ffff"/>&ndash;&gt;-->
    <!--</service-properties>-->
    <!--</service>-->

    <service interface="javax.servlet.Filter">
        <service-properties>
            <entry key="urlPatterns" value="/camel/servlet/*"/>
        </service-properties>
        <bean class="com.kalix.framework.core.security.authc.filter.Oauth2Filter">
            <property name="exceptUrlList">
                <list>
                </list>
            </property>
        </bean>
        <!--<bean class="com.kalix.framework.core.jwt.filter.JwtFilter">-->
        <!--<property name="exceptUrlList">-->
        <!--<list>-->
        <!--<value>/system</value>-->
        <!--<value>/system/login</value>-->
        <!--<value>/system/vcode/[a-zA-Z0-9]{1,}</value>-->
        <!--</list>-->
        <!--</property>-->
        <!--</bean>-->
    </service>
</blueprint>
